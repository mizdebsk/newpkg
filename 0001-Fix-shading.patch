From dc9fcf7a07ea3d7f0796625523ef8bd8fc248357 Mon Sep 17 00:00:00 2001
From: Stanislav Ochotnicky <sochotnicky@redhat.com>
Date: Wed, 2 Feb 2011 13:59:28 +0100
Subject: [PATCH] Fix shading

---
 sisu-inject/guice-bean/sisu-inject-bean/pom.xml    |   13 +++----------
 .../guice-plexus/sisu-inject-plexus/pom.xml        |    8 --------
 2 files changed, 3 insertions(+), 18 deletions(-)

diff --git a/sisu-inject/guice-bean/sisu-inject-bean/pom.xml b/sisu-inject/guice-bean/sisu-inject-bean/pom.xml
index 2b129c6..6a9a9b4 100644
--- a/sisu-inject/guice-bean/sisu-inject-bean/pom.xml
+++ b/sisu-inject/guice-bean/sisu-inject-bean/pom.xml
@@ -58,10 +58,9 @@
             </DynamicImport-Package>
             <Export-Package>
               org.sonatype.inject.*;-noimport:=true;-split-package:=merge-first;version=${project.version},
-              javax.*|org.aopalliance.*;version=1
             </Export-Package>
             <Private-Package>
-              org.sonatype.guice.*,org.objectweb.asm
+              org.sonatype.guice.*
             </Private-Package>
           </instructions>
         </configuration>
@@ -80,18 +79,12 @@
                   <include>${project.groupId}:${project.artifactId}</include>
                 </includes>
               </artifactSet>
-              <relocations>
-                <relocation>
-                  <pattern>org.objectweb</pattern>
-                  <shadedPattern>org.sonatype.guice</shadedPattern>
-                </relocation>
-              </relocations>
               <filters>
                 <filter>
                   <artifact>*:*</artifact>
                   <excludes>
-                    <exclude>org/objectweb/asm/*Adapter*</exclude>
-                    <exclude>org/objectweb/asm/*Writer*</exclude>
+                    <exclude>org.objectweb.asm:asm</exclude>
+                    <exclude>javax.inject:javax.inject</exclude>
                   </excludes>
                 </filter>
               </filters>
diff --git a/sisu-inject/guice-plexus/sisu-inject-plexus/pom.xml b/sisu-inject/guice-plexus/sisu-inject-plexus/pom.xml
index 0eef00e..48fe364 100644
--- a/sisu-inject/guice-plexus/sisu-inject-plexus/pom.xml
+++ b/sisu-inject/guice-plexus/sisu-inject-plexus/pom.xml
@@ -81,20 +81,12 @@
                   <include>${project.groupId}:${project.artifactId}</include>
                 </includes>
               </artifactSet>
-              <relocations>
-                <relocation>
-                  <pattern>org.objectweb</pattern>
-                  <shadedPattern>org.sonatype.guice</shadedPattern>
-                </relocation>
-              </relocations>
               <filters>
                 <filter>
                   <artifact>*:*</artifact>
                   <includes>
                     <include>META-INF/**</include>
-                    <include>org/codehaus/plexus/**</include>
                     <include>org/sonatype/guice/plexus/**</include>
-                    <include>org/objectweb/asm/*Writer*</include>
                   </includes>
                 </filter>
               </filters>
-- 
1.7.3.5

